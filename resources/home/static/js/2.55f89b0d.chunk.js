(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1227:function(e,t,a){},1228:function(e,t,a){"use strict";var n=a(28),c=a(0),r=a.n(c),l=a(75),s=a(1166),o=a(1361),i=a(196),u=a(194),m=a(4),d=a(32),f=a(335),g=a(3),p=(a(1224),Object(c.forwardRef)(function(e,t){var a=Object(c.useState)(!1),p=Object(n.a)(a,2),b=p[0],h=p[1],v=Object(c.useState)(""),E=Object(n.a)(v,2),k=E[0],O=E[1],y=Object(c.useState)(""),j=Object(n.a)(y,2),w=j[0],N=j[1],C=Object(c.useState)({files:null,link:""}),x=Object(n.a)(C,2),S=x[0],R=x[1],L=Object(c.useState)(""),M=Object(n.a)(L,2),_=M[0],U=M[1],q=Object(c.useState)(""),A=Object(n.a)(q,2),I=A[0],V=A[1],T=Object(c.useRef)(),G=Object(c.useRef)(),B=Object(d.d)(function(e){return e.group.stories}),H=B.loading,z=B.myStoriesActive,D=void 0===z?[]:z,P=Object(d.c)();Object(c.useImperativeHandle)(t,function(){return{handleVisible:function(e){h(e||!1)}}}),Object(c.useEffect)(function(){b&&D.length>=5&&V("err.max3video"),b||(O(""),N(""),R({files:null,link:""}))},[b]);return r.a.createElement(l.a,Object.assign({},e,{show:b,onHide:function(){return h(!1)}}),r.a.createElement("div",{className:"create__action"},r.a.createElement("div",{className:"create__action--left"},r.a.createElement(s.a,{controlId:"formControlsTextarea"},r.a.createElement(o.a,null,r.a.createElement(m.b,{id:"gameprofile.description"})," *"),r.a.createElement(i.a,{value:k,componentClass:"textarea",maxLength:"200",rows:"5",onChange:function(e){return O(e.target.value)}})),r.a.createElement(s.a,{controlId:"formControlsText"},r.a.createElement(o.a,null,"Hashtags"),r.a.createElement(i.a,{type:"text",value:w,onChange:function(e){return e.target.value.split(",").length<6&&N(e.target.value.replace("#",""))},maxLength:"150"}),r.a.createElement("small",null,w?w.split(",").map(function(e,t){return r.a.createElement("span",{key:e+t},"#",e.trim().replace(/ /g,"_"))}):null)),r.a.createElement(u.a,{bsStyle:"danger",className:"btn-fill",disabled:D.length>=5||!k||!S.link||I||H,onClick:function(){P(Object(f.j)({content:k,video:S.files,imagePreview:_,themeTags:w.length?w.split(",").map(function(e){return g.c.removeVietnameseAccents(e.trim().replace(/ /g,"_"))}):[]},function(){return h(!1)}))}},H&&r.a.createElement("i",{className:"fa fa-spinner fa-spin"})," ",r.a.createElement(m.b,{id:"button.post"}))),r.a.createElement("div",{className:"create__action--right"},r.a.createElement("div",{className:"post-video"},r.a.createElement("input",{className:"hidden",ref:T,type:"file",name:"file-video",accept:"video/*",onChange:function(e){var t=e.target,a=t.type,n=t.files,c=t.name;if("file"===a&&"file-video"===c)return n[0]?1===n.length&&n[0].size>40420460?(R({files:null,link:""}),V("Max 40mb")):(function(e){var t=new FileReader;console.log(t),t.onload=function(){var a=new Blob([t.result],{type:e.type}),n=URL.createObjectURL(a),c=document.createElement("video"),r=function e(){l()&&(c.removeEventListener("timeupdate",e),c.pause())};c.addEventListener("loadeddata",function(){l()&&(c.removeEventListener("timeupdate",r),c.remove(),c&&(c.style.display="none"))});var l=function(){var e=document.createElement("canvas");e.width=c.videoWidth,e.height=c.videoHeight,e.getContext("2d").drawImage(c,0,0,e.width,e.height);var t=e.toDataURL(),a=t.length>1e5;return a&&U(t),a};c.addEventListener("timeupdate",r),c.preload="metadata",c.src=n,c.muted=!0,c.playsInline=!0,c.play()},t.readAsArrayBuffer(e)}(n[0]),R({files:n,link:URL.createObjectURL(n[0])})):R({files:null,link:""})}}),S.link?r.a.createElement("div",{className:"preview-video"},r.a.createElement("video",{playsInline:!0,onLoadedData:function(){return G.current&&G.current.duration>61?(R({files:null,link:""}),V("err.max60s")):V("")},ref:G,controls:!0,width:"100%",controlsList:"nodownload",src:S.link,id:"video-story"}),r.a.createElement("i",{className:"fas fa-times-circle",onClick:function(){return!H&&R({files:null,link:""})}})):r.a.createElement("a",{onClick:function(){return D.length<5&&T.current.click()}},r.a.createElement("p",null,r.a.createElement("i",{className:"fas fa-play-circle fa-2x"})," ",r.a.createElement(m.b,{id:"userProfile.postVideo"}),I?r.a.createElement("small",{className:"error"},r.a.createElement(m.b,{id:I})):null))))))}));t.a=r.a.memo(p)},1235:function(e,t,a){"use strict";var n=a(28),c=a(15),r=a.n(c),l=a(0),s=a.n(l),o=a(351),i=a.n(o),u=a(158),m=a.n(u),d=a(256),f=a(3),g=a(1174),p=a(336),b=a.n(p),h=a(29),v=(a(1294),a(75)),E=a(1166),k=a(1361),O=a(196),y=a(1362),j=a(194),w=function(e){var t=e.show,a=e.setShow,c=e.blockUserRequest,r=e.author,o=Object(l.useState)(""),i=Object(n.a)(o,2),u=i[0],m=i[1],d=Object(l.useState)(""),f=Object(n.a)(d,2),g=f[0],p=f[1],b=function(){a(!1)};return s.a.createElement(v.a,{show:t,onHide:b},s.a.createElement(v.a.Header,{closeButton:!0},s.a.createElement(v.a.Title,null,"C\u1ea5m chat")),s.a.createElement(v.a.Body,null,s.a.createElement(E.a,{controlId:"formBasicText",validationState:function(){var e=u.length;return e>0?"success":0===e||e>255?"error":null}()},s.a.createElement(k.a,null,"L\xed do c\u1ea5m chat"),s.a.createElement(O.a,{type:"text",value:u,placeholder:"l\xed do",onChange:function(e){m(e.target.value),e.target.value&&e.target.value.length>255?p("T\u1ed1i \u0111a 255 k\xed t\u1ef1"):p("")}}),s.a.createElement(O.a.Feedback,null),s.a.createElement(y.a,null,g||null))),s.a.createElement(v.a.Footer,null,s.a.createElement(j.a,{onClick:b},"Close"),s.a.createElement(j.a,{bsStyle:"danger",onClick:function(){0===u.trim().length?p("Tr\u01b0\u1eddng n\xe0y kh\xf4ng \u0111\u01b0\u1ee3c \u0111\u1ec3 tr\u1ed1ng."):c(r._id,{status:"block",reason:u})}},"Block")))},N=function(e){var t=e.message,a=e.author,c=e.blockUserRequest,r=/(https?:\/\/[^\s]+)\b([-a-zA-Z0-9@:%_.~#?&//=]*)/g,o=/playerduo.net|poketrainer.net|shope|mycollection/gi,i=Object(l.useState)(!1),u=Object(n.a)(i,2),m=u[0],p=u[1];if(!t)return null;var v=t.split("\n").map(function(e,t){var a=e.replace(/\&lt;/gi,"<");a=a.replace(/script|localStorage|document|fetch|cookie/g,""),!/fa-bitcoin|@([a-z0-9]{1,100})<(.*?)>/gi.test(a)&&(a=a.replace(/<[^>]+>/g,"")),(a=(a=(a=a.replace(/@([a-z0-9]{1,100})<(.*?)>/gi,"<a target='_blank' class='link tag' href='/$1'>$2</a>")).replace(r,"<a target='_blank' href='$1' class='link'>$1</a>")).replace(/(>http[s]?:\/\/[^\s]+)\b([/])/g,">")).includes("<a target")&&!o.test(a)&&(a=a.replace(r,""));var n=b()(a);return 1===e.indexOf("\n")?-1!==e.indexOf("https://")||-1!==e.indexOf("http://")?n:e.slice(e.indexOf("\n")):-1!==e.indexOf("https://")||-1!==e.indexOf("http://")?n:e?n:s.a.createElement("br",null)});return/18\+|fuck|v\xfa|b\u01b0\u1edbm|\u0111\u1ecbt|\u0111\u1ee5|\u0111\u1ee5 m\u1eb9|l\u1ed3n|c\u1eb7c|\u0111\u0129|show|sex|dirty talk|d\xe2m/g.test(t)?null:s.a.createElement(g.a,{className:"global_message__item"},s.a.createElement(g.a.Left,null,s.a.createElement(h.b,{to:"/".concat(a.playerSetting.url||"".concat(a._id)),target:"_blank"},s.a.createElement(d.a,{size:"sm",url:f.c.getLinkImage(a.avatar),rankVip:a.rank}))),s.a.createElement(g.a.Body,{className:"admin"===a.role||"manager"===a.role?"admin":""},s.a.createElement("p",{className:"chat-name"},s.a.createElement("strong",{className:f.d.classOfVipName(a.rank)},s.a.createElement("span",{className:"cursor-pointer",onClick:function(){window.open("".concat(window.location.origin,"/").concat(a.playerSetting.url||"".concat(a._id)))}},a.name.replace(/\u3164/g,"").length>38?a.name.replace(/\u3164/g,"").substring(0,35)+"...":a.name.replace(/\u3164/g,"")," "),!["normal",void 0].includes(localStorage.role)&&s.a.createElement("i",{onClick:function(){p(!0)},className:"fas fa-ban"})," "),a.trustTypes&&a.trustTypes.includes("pay")&&s.a.createElement("i",{className:"fas fa-check-circle"})," ",":"," "),s.a.createElement("p",{className:"mess-global"},v)),s.a.createElement(w,{author:a,show:m,setShow:p,blockUserRequest:c}))};N.defaultProps={message:"",author:{}};var C=N,x=(a(1295),s.a.memo(function(e){var t=e.data,a=e.fetchGlobalMessage,n=e.isConnect,c=e.blockUserRequest,r=t||{},o=r.messages,i=r.loadingMessage,u=void 0===i?{}:i,d=r.hasMore,f=r.idUserAuthorChat,g=Object(l.useRef)(null),p=function(){g.current.scrollIntoView(!1)},b=function(e){a(o,e)};Object(l.useEffect)(function(){g.current&&Array.isArray(o)&&o.length<=20&&p()},[o]),Object(l.useEffect)(function(){b(!n&&o.length>0),p()},[n]);Object(l.useEffect)(function(){var e=document.getElementById("global-chat"),t=function(e){if(e){var t=getComputedStyle(e),a=parseInt(t.paddingTop)+parseInt(t.paddingBottom);return e.clientHeight-a}return 0}(e),a=e.scrollHeight-(e.scrollTop+t)<200;(localStorage.idUser===f||!u.newMessage&&e&&a)&&p()},[u.newMessage]);return s.a.createElement("div",{id:"global-chat",className:"global-chat-display"},s.a.createElement(m.a,{pageStart:0,loadMore:function(){o&&o[0]&&(u.message||b())},hasMore:d,loader:s.a.createElement("div",{className:"text-center",key:"spin-global-chat"},s.a.createElement("i",{className:"fa fa-spinner fa-spin"})),useWindow:!1,initialLoad:!1,threshold:20,isReverse:!0},n?(o||[]).map(function(e,t){return s.a.createElement(C,Object.assign({key:e._id+t,author:e.sender||{},message:e.body?e.body.content:"",isConnect:!0,blockUserRequest:c},e))}):(o||[]).map(function(e){return s.a.createElement(C,Object.assign({key:e._id},e,{blockUserRequest:c}))}),s.a.createElement("div",{ref:g})))})),S=a(344),R=a(122),L=a(1296),M=a.n(L),_=a(1169),U=a(1177),q=a(1179),A=a(4),I=a(32),V=a(30),T=a(516),G=Object(A.g)(function(e){var t=e.intl,a=e.requestGlobalMessage,c=e.setNotificationStatus,r=e.isConnect,o=e.disabledChat,i=e.data||{},u=i.messages,m=i.loadingMessage,d=void 0===m?{}:m,p=Object(l.useState)(""),b=Object(n.a)(p,2),h=b[0],v=b[1],k=Object(l.useState)(!1),y=Object(n.a)(k,2),j=y[0],w=y[1],N=Object(l.useState)(!1),C=Object(n.a)(N,2),x=C[0],L=C[1],G=Object(l.useState)(-1),B=Object(n.a)(G,2),H=B[0],z=B[1],D=Object(l.useRef)(),P=Object(I.c)(),F=function(e){return e?r?e.sender:e.author:M()(u,r?"sender.name":"author.name")},$=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a="".concat(h.slice(0,H),"@<").concat(e,">"),n=h.slice(t||H+1),c="".concat(a).concat(n," ");-1===h.indexOf(e)&&v(c),z(-1),L(!1),D.current.focus()},J=function(e){if((0!==h.trim().length&&(!(h.trim().length>255)||(c(!1,t.formatMessage({id:"err.max200char"})),0))&&f.c.filterChar(h)||e)&&localStorage.token){var n=h.trim();F().map(function(e){return n.indexOf("@<".concat(F(e).name,">"))>-1&&(n=n.replace("@<".concat(F(e).name,">"),"@".concat(F(e).url||"".concat(F(e)._id),"<").concat(F(e).name,">")))});var l={body:{content:e||n},type:"text"};if(L(!1),n.length>255)return c(!1,t.formatMessage({id:"err.max200char"}));a(r?l:n)}v("")},K=s.a.createElement(_.a,{id:"popover-positioned-top",title:s.a.createElement(A.b,{id:"gameprofile.batmicrophone"})},s.a.createElement("a",{href:"https://support.google.com/chrome/answer/2693767?co=GENIE.Platform%3DDesktop&hl=vi",target:"_blank",rel:"noopener noreferrer"},s.a.createElement(A.b,{id:"title.clickhere"}))),W=s.a.createElement(_.a,{id:"popover-emoij-top"},s.a.createElement(T.a,{setValue:v,value:h}));return s.a.createElement(E.a,{controlId:"formChatText"},x&&s.a.createElement("div",{className:"box-acc"},s.a.createElement("div",{className:"list-tag"},function(){if(d.message)return s.a.createElement("i",{className:"fa fa-spinner fa-spin"});var e=f.c.removeVietnameseAccents(h.slice(H+1).split(" ")[0]).toLowerCase();return F().map(function(t){return F(t)._id===localStorage.idUser||"admin"===F(t).role||-1===f.c.removeVietnameseAccents(F(t).name.toLowerCase()).indexOf(e)?null:s.a.createElement(g.a,{onClick:function(){return $(F(t).name,D.current.selectionStart)}},s.a.createElement(g.a.Left,null,s.a.createElement(V.a,{size:"sm",url:f.c.getLinkImage(F(t).avatar),sizeVip:18,rankVip:F(t).rank&&f.c.urlRankVip_New(F(t).rank),classRank:"rank-vip"})),s.a.createElement(g.a.Body,null,s.a.createElement("strong",{className:"list-group-item ".concat(f.d.classOfVipName(F(t).rank))},F(t).name)))})}())),s.a.createElement(U.a,null,s.a.createElement(O.a,{inputRef:D,type:"text",value:h,placeholder:e.intl.formatMessage({id:"playerHistory.reply"}),onChange:function(e){var t=e.target.value,a=D.current.selectionStart-1;if(" "===t.charAt(a)&&H>-1){var n=F().filter(function(e){return f.c.removeVietnameseAccents(F(e).name.toLowerCase()).indexOf(f.c.removeVietnameseAccents(t.slice(H+1,a)).trim())>-1});if(n.length>0)return $(F(n[0]).name,a)}"@"!==t.charAt(H)&&(z(-1),L(!1)),v(t.replace("\u3164",""))},onKeyPress:function(e){return 32===e.charCode?L(!1):"@"===e.key?(z(e.target.selectionStart),L(!0)):void(e.shiftKey||13===e.charCode&&(J(),e.preventDefault()))},maxLength:255,disabled:!localStorage.getItem("token")||o}),localStorage.token&&s.a.createElement("p",{className:"send-chat",onClick:J},s.a.createElement("i",{className:"fas fa-paper-plane"})),r?s.a.createElement(q.a,{trigger:"click",rootClose:!0,placement:"top",overlay:W},s.a.createElement(U.a.Addon,null,s.a.createElement("i",{className:"far fa-grin"}))):s.a.createElement(U.a.Addon,{className:"scope-icon"})),r&&s.a.createElement("div",{className:"connect-chat "},s.a.createElement("p",{className:"btn-directing"},s.a.createElement(q.a,{trigger:"click",rootClose:!0,placement:"top",overlay:K},s.a.createElement("i",{className:"fas fa-question-circle"}))),s.a.createElement(S.a,{show:j,close:function(){return w(!1)},submit:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2?arguments[2]:void 0,n=arguments.length>3?arguments[3]:void 0,c=arguments.length>4?arguments[4]:void 0,r=arguments.length>5?arguments[5]:void 0;P(Object(R.b)({amount:e,displayName:t,message:a,pdUserReceive:n,unlockTime:c,lang:r})),J("\u0110\xe3 \u1ee7ng h\u1ed9 <strong>".concat(e/1e3,"</strong> <i class='fab fa-bitcoin' />")),w(!1)},unlockSecurityCode:function(e){return P(Object(R.f)(e))},isConnect:!0})))}),B=(a(1297),function(e){var t=e.data,a=e.fetchGlobalMessage,n=e.requestGlobalMessage,c=e.setNotificationStatus,r=e.extend,l=e.setExtend,o=e.isConnect,i=e.disabledChat,u=e.blockUserRequest;return s.a.createElement("div",{className:"global-chat"},s.a.createElement(x,{data:t,fetchGlobalMessage:a,extend:r,isConnect:o,blockUserRequest:u}),s.a.createElement(G,{data:t,requestGlobalMessage:n,setNotificationStatus:c,extend:r,setExtend:l,isConnect:o,disabledChat:i}))}),H=(a(1227),null);t.a=function(e){var t=e.type,a=e.data,c=e.fetchGlobalMessage,o=e.requestGlobalMessage,u=e.messageFetched,m=e.setMessageLoading,d=e.blockUserRequest,f=Object(l.useState)(!1),g=Object(n.a)(f,2),p=g[0],b=g[1];Object(l.useEffect)(function(){return h(),function(){H.disconnect(!0),m({message:!1},!0)}},[]);var h=function(){var e=i()("".concat(r.a.socketUrl,"/outside?deviceType=browser"),{path:"/socket",transports:["websocket","polling"]});e.on("error",function(e){}),e.on("global-chat",function(e){"new-global-message"===e.action&&t===e.data.type&&(m({newMessage:!0}),u([],void 0,e.data||{}),m({newMessage:!1}))}),H=e};return a.isLoading?null:s.a.createElement("div",{className:"slide extend-box"},s.a.createElement(B,{data:a,fetchGlobalMessage:c,requestGlobalMessage:o,blockUserRequest:d,extend:p,setExtend:b}))}},1294:function(e,t,a){},1295:function(e,t,a){},1297:function(e,t,a){}}]);